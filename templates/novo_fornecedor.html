{% extends "template.html" %}
{% block conteudo %}

<div class="container-fluid">
    <div class="shadow p-3 mb-2 bg-dark h2 rounded text-white text-center "><i class="fas fa-truck"></i> Novo Fornecedor</div>
    <form action="{{ url_for('novo_fornecedor') }}" method="post" enctype="multipart/form-data" class="bg-dark container-fluid rounded">
        <fieldset>
       <div class="row">
           <div class="col-sm">
           <div class="form-group ">
                <label for="rateio" class="p-2 mb-2 bg-dark h5 rounded text-white">Rateio</label>
                <select class="form-control col-sm-6 col-form-label" id="rateio" name="rateio">
                    <option value="NÃO">NÃO</option>
                    <option value="SIM">SIM</option>
                </select>
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="razao_social">Razão Social</label>
            <input type="text" id="razao_social" name="razao_social" class="form-control col-sm-6 col-form-label" required autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="nome_fantasia">Nome Fantasia</label>
            <input type="text" id="nome_fantasia" name="nome_fantasia" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="descricao">Descrição</label>
            <input type="text" id="descricao" name="descricao" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="telefone">Telefone</label>
            <input type="text" id="telefone" name="telefone" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="email">Email</label>
            <input type="email" id="email" name="email" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="contato">Contato</label>
            <input type="text" id="contato" name="contato" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="cep">CEP</label>
            <input type="text" id="cep" name="cep" class="form-control col-sm-6 col-form-label mb-2" autocomplete="off">
               <button type="button" onclick="buscarCEP()" class="btn btn-primary mr-2"><i class="fas fa-search "></i> Buscar CEP</button>
           </div>

           </div>
           <div class="col-sm">
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="logradouro">Rua</label>
            <input type="text" id="logradouro" name="rua" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="numero">Número</label>
            <input type="text" id="numero" name="numero" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
            <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="complemento">Complemento</label>
            <input type="text" id="complemento" name="complemento" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="bairro">Bairro</label>
            <input type="text" id="bairro" name="bairro" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="cidade">Cidade</label>
            <input type="text" id="cidade" name="cidade" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="estado">Estado</label>
            <input type="text" id="estado" name="uf" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
           <div class="form-group">
            <label class="p-2 mb-2 bg-dark h5 rounded text-white" for="informacao_adicional">Informações Adicionais</label>
            <input type="text" id="informacao_adicional" name="informacao_adicional" class="form-control col-sm-6 col-form-label" autocomplete="off">
           </div>
            <button type="submit" class="btn btn-primary mr-2"><i class="fas fa-plus-square "></i> Adicionar</button>
           </div>
           </div>
                <br><br>
        </fieldset>
      </form>

</div>
<script>
    function buscarCEP() {
        var cep = document.getElementById('cep').value;
        var url = `https://viacep.com.br/ws/${cep}/json/`;

        fetch(url)
            .then(response => response.json())
            .then(data => preencherCampos(data))
            .catch(error => console.log(error));
    }

    function preencherCampos(data) {
        document.getElementById('logradouro').value = data.logradouro;
        document.getElementById('bairro').value = data.bairro;
        document.getElementById('cidade').value = data.localidade;
        document.getElementById('estado').value = data.uf;
    }
</script>
{% endblock %}